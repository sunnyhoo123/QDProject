webpackJsonp([31],{CAkk:function(e,t){},YVWf:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"WebSocket",components:{},data:function(){return{text:"",wsData:"",htmlParse:"<span style='color:red'>利用vue添加了插入一个span 元素</span> 标签以外的文字",websocket:null}},mounted:function(){"WebSocket"in window?(this.websocket=new WebSocket("ws://121.40.165.18:8800"),this.initWebSocket()):this.$message({message:this.$t("当前浏览器 Not support websocket"),center:!0,type:"success"})},beforeDestroy:function(){this.onbeforeunload()},methods:{initWebSocket:function(){this.websocket.onerror=this.setErrorMessage,this.websocket.onopen=this.setOnopenMessage,this.websocket.onmessage=this.setOnmessageMessage,this.websocket.onclose=this.setOncloseMessage,window.onbeforeunload=this.onbeforeunload},setErrorMessage:function(){this.wsData="WebSocket连接发生错误   状态码："+this.websocket.readyState},setOnopenMessage:function(){this.wsData="WebSocket连接成功   状态码："+this.websocket.readyState},setOnmessageMessage:function(e){this.wsData="服务端返回："+e.data},setOncloseMessage:function(){this.wsData="WebSocket连接关闭   状态码："+this.websocket.readyState},onbeforeunload:function(){this.closeWebSocket()},send:function(){this.websocket.send(this.text),this.text=""},closeWebSocket:function(){this.websocket.close()}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],attrs:{type:"text"},domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value)}}}),e._v(" "),s("button",{on:{click:function(t){return e.send()}}},[e._v("发送消息")]),e._v(" "),s("br"),e._v(" "),s("button",{on:{click:function(t){return e.closeWebSocket()}}},[e._v("关闭websocket连接")]),e._v(" "),s("br"),e._v(" "),s("p",{domProps:{innerHTML:e._s(e.htmlParse)}},[e._v(e._s(e.htmlParse))]),e._v(" "),s("div",{domProps:{innerHTML:e._s(e.wsData)}},[e._v(e._s(e.wsData))])])},staticRenderFns:[]};var a=s("VU/8")(o,n,!1,function(e){s("CAkk")},"data-v-1d6d43a6",null);t.default=a.exports}});
//# sourceMappingURL=31.3e08d2c8bbbadda10f45.js.map