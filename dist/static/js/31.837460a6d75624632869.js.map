{"version":3,"sources":["webpack:///src/views/More/WebSocket/index.vue","webpack:///./src/views/More/WebSocket/index.vue?b29f","webpack:///./src/views/More/WebSocket/index.vue"],"names":["More_WebSocket","name","components","data","text","wsData","htmlParse","websocket","mounted","window","this","WebSocket","initWebSocket","$message","message","$t","center","type","beforeDestroy","onbeforeunload","methods","onerror","setErrorMessage","onopen","setOnopenMessage","onmessage","setOnmessageMessage","onclose","setOncloseMessage","readyState","event","closeWebSocket","send","close","views_More_WebSocket","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","attrs","domProps","on","input","$event","target","composing","_v","click","innerHTML","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"sGAaA,IAAAA,GACAC,KAAA,YACAC,cAGAC,KALA,WAMA,OACAC,KAAA,GACAC,OAAA,GACAC,UAAA,6DACAC,UAAA,OAGAC,QAbA,WAcA,cAAAC,QACAC,KAAAH,UAAA,IAAAI,UAAA,2BACAD,KAAAE,iBAEAF,KAAAG,UACAC,QAAAJ,KAAAK,GAAA,+BACAC,QAAA,EACAC,KAAA,aAIAC,cAzBA,WA0BAR,KAAAS,kBAEAC,SAEAR,cAFA,WAIAF,KAAAH,UAAAc,QAAAX,KAAAY,gBAGAZ,KAAAH,UAAAgB,OAAAb,KAAAc,iBAGAd,KAAAH,UAAAkB,UAAAf,KAAAgB,oBAGAhB,KAAAH,UAAAoB,QAAAjB,KAAAkB,kBAGAnB,OAAAU,eAAAT,KAAAS,gBAEAG,gBAlBA,WAmBAZ,KAAAL,OAAA,yBAAAK,KAAAH,UAAAsB,YAEAL,iBArBA,WAsBAd,KAAAL,OAAA,uBAAAK,KAAAH,UAAAsB,YAEAH,oBAxBA,SAwBAI,GACApB,KAAAL,OAAA,SAAAyB,EAAA3B,MAEAyB,kBA3BA,WA4BAlB,KAAAL,OAAA,uBAAAK,KAAAH,UAAAsB,YAEAV,eA9BA,WA+BAT,KAAAqB,kBAIAC,KAnCA,WAoCAtB,KAAAH,UAAAyB,KAAAtB,KAAAN,MACAM,KAAAN,KAAA,IAEA2B,eAvCA,WAwCArB,KAAAH,UAAA0B,WC9EeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA1B,KAAa2B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,SAA6BE,aAAaxC,KAAA,QAAAyC,QAAA,UAAAC,MAAAP,EAAA,KAAAQ,WAAA,SAAkEC,OAAS5B,KAAA,QAAc6B,UAAWH,MAAAP,EAAA,MAAmBW,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsCf,EAAAhC,KAAA6C,EAAAC,OAAAP,WAA+BP,EAAAgB,GAAA,KAAAb,EAAA,UAA2BQ,IAAIM,MAAA,SAAAJ,GAAyB,OAAAb,EAAAJ,WAAoBI,EAAAgB,GAAA,UAAAhB,EAAAgB,GAAA,KAAAb,EAAA,MAAAH,EAAAgB,GAAA,KAAAb,EAAA,UAAiEQ,IAAIM,MAAA,SAAAJ,GAAyB,OAAAb,EAAAL,qBAA8BK,EAAAgB,GAAA,mBAAAhB,EAAAgB,GAAA,KAAAb,EAAA,MAAAH,EAAAgB,GAAA,KAAAb,EAAA,KAAqEO,UAAUQ,UAAAlB,EAAAmB,GAAAnB,EAAA9B,cAAmC8B,EAAAgB,GAAAhB,EAAAmB,GAAAnB,EAAA9B,cAAA8B,EAAAgB,GAAA,KAAAb,EAAA,OAAwDO,UAAUQ,UAAAlB,EAAAmB,GAAAnB,EAAA/B,WAAgC+B,EAAAgB,GAAAhB,EAAAmB,GAAAnB,EAAA/B,cAExuBmD,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE3D,EACAkC,GATF,EAVA,SAAA0B,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/31.837460a6d75624632869.js","sourcesContent":["\n<template>\n  <div>\n    <input v-model=\"text\" type=\"text\">\n    <button @click=\"send()\">发送消息</button>\n    <br>\n    <button @click=\"closeWebSocket()\">关闭websocket连接</button>\n    <br>\n    <p v-html=\"htmlParse\">{{ htmlParse }}</p>\n    <div v-html=\"wsData\">{{ wsData }}</div>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"WebSocket\",\n  components: {\n \n  },\n  data() {\n    return {\n      text: \"\",\n      wsData: \"\",\n      htmlParse: \"<span style='color:red'>利用vue添加了插入一个span 元素</span> 标签以外的文字\",\n      websocket: null\n    }\n  },\n  mounted() {\n    if (\"WebSocket\" in window) {\n      this.websocket = new WebSocket(\"ws://121.40.165.18:8800\")\n      this.initWebSocket()\n    } else {\n      this.$message({\n        message: this.$t(\"当前浏览器 Not support websocket\"),\n        center: true,\n        type: \"success\",\n      });\n    }\n  },\n  beforeDestroy() {\n    this.onbeforeunload()\n  },\n  methods: {\n    // vue websocket 线上测试地址 http://www.websocket-test.com/\n    initWebSocket() {\n      // 连接错误\n      this.websocket.onerror = this.setErrorMessage\n \n      // 连接成功\n      this.websocket.onopen = this.setOnopenMessage\n \n      // 收到消息的回调\n      this.websocket.onmessage = this.setOnmessageMessage\n \n      //连接关闭的回调\n      this.websocket.onclose = this.setOncloseMessage\n \n      //监听窗口关闭事件，当窗口关闭时，主动去关闭websocket连接，防止连接还没断开就关闭窗口，server端会抛异常。\n      window.onbeforeunload = this.onbeforeunload\n    },\n    setErrorMessage() {\n      this.wsData = \"WebSocket连接发生错误\" + \"   状态码：\" + this.websocket.readyState;\n    },\n    setOnopenMessage() {\n      this.wsData = \"WebSocket连接成功\" + \"   状态码：\" + this.websocket.readyState;\n    },\n    setOnmessageMessage(event) {\n      this.wsData = \"服务端返回：\" + event.data;\n    },\n    setOncloseMessage() {\n      this.wsData = \"WebSocket连接关闭\" + \"   状态码：\" + this.websocket.readyState;\n    },\n    onbeforeunload() {\n      this.closeWebSocket();\n    },\n \n    //websocket发送消息\n    send() {\n      this.websocket.send(this.text)\n      this.text = \"\"\n    },\n    closeWebSocket() {\n      this.websocket.close()\n    }\n  }\n}\n \n</script>\n<style scoped>\n\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/More/WebSocket/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){return _vm.send()}}},[_vm._v(\"发送消息\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){return _vm.closeWebSocket()}}},[_vm._v(\"关闭websocket连接\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.htmlParse)}},[_vm._v(_vm._s(_vm.htmlParse))]),_vm._v(\" \"),_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.wsData)}},[_vm._v(_vm._s(_vm.wsData))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1d6d43a6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/More/WebSocket/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1d6d43a6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1d6d43a6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1d6d43a6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/More/WebSocket/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}